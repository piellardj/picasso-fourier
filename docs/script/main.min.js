!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="speed-range-id",i="loop-checkbox-id",o="reset-button-id",a="circles-checkbox-id",s="segments-checkbox-id",u="curve-checkbox-id",c="original-curve-checkbox-id",h="order-range-id";function f(e){for(var t=0,r=e;t<r.length;t++){(0,r[t])()}}var l=[],d=[],p=[],g=function(){function e(){}return Object.defineProperty(e,"speed",{get:function(){return v},set:function(e){v=e,Range.setValue(n,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loop",{get:function(){return b},set:function(e){b!==e&&(b=e,Checkbox.setChecked(i,e))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"displayCircles",{get:function(){return m},set:function(e){m!==e&&(m=e,Checkbox.setChecked(a,e))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"displaySegments",{get:function(){return y},set:function(e){y!==e&&(y=e,Checkbox.setChecked(s,e))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"displayCurve",{get:function(){return P},set:function(e){P!==e&&(P=e,Checkbox.setChecked(u,e))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"displayOriginalCurve",{get:function(){return x},set:function(e){x!==e&&(x=e,Checkbox.setChecked(c,e))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"order",{get:function(){return O},set:function(e){O=e,Range.setValue(h,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"integrationPrecision",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"curvePrecision",{get:function(){return.5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clearObservers",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(e,"redrawObservers",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(e,"speedChangeObservers",{get:function(){return p},enumerable:!0,configurable:!0}),e}();t.Parameters=g;var v=Range.getValue(n);Range.addObserver(n,(function(e){var t=v;v=e;for(var r=0,n=p;r<n.length;r++){(0,n[r])(t)}}));var b=Checkbox.isChecked(i);Checkbox.addObserver(i,(function(e){b=e})),Button.addObserver(o,(function(){return f(l)}));var m=Checkbox.isChecked(a);Checkbox.addObserver(a,(function(e){m=e,f(d)}));var y=Checkbox.isChecked(s);Checkbox.addObserver(s,(function(e){y=e,f(d)}));var P=Checkbox.isChecked(u);Checkbox.addObserver(u,(function(e){P=e,f(d)}));var x=Checkbox.isChecked(c);Checkbox.addObserver(c,(function(e){x=e,f(d)}));var O=Range.getValue(h);Range.addObserver(h,(function(e){O=e,f(l)}))},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(2)),o=n(r(3)),a=n(r(5)),s=r(0),u=r(6);!function(){var e,t,r,n=document.getElementById("canvas"),c=n.getContext("2d");n.width=512,n.height=512,c.lineWidth=1;var h=new a.default,f=!0;s.Parameters.clearObservers.push((function(){return f=!0}));var l=!0;s.Parameters.redrawObservers.push((function(){return l=!0}));var d=2e3;function p(){var o=h.current/d;if(o>=1&&s.Parameters.loop&&(f=!0),f){f=!1,h.reset(),o=0,Canvas.setIndicatorText("fourier-order",s.Parameters.order.toLocaleString());for(var a=Math.max(2,Math.ceil(s.Parameters.curvePrecision*e.pathLength)),u=[],g=0;g<a;g++){var v=g/(a+1),b=t.computePoint(s.Parameters.order,v);u.push(b)}r=new i.default(u)}l&&function(i){c.clearRect(0,0,n.width,n.height),s.Parameters.displayCircles&&(c.strokeStyle="rgba(255,255,255,0.3)",t.drawCircles(c,s.Parameters.order,i)),s.Parameters.displayCurve&&r&&(c.strokeStyle="white",r.draw(c,i)),s.Parameters.displayOriginalCurve&&(c.strokeStyle="green",e.draw(c,i)),s.Parameters.displaySegments&&(c.strokeStyle="red",t.drawPathToPoint(c,s.Parameters.order,i))}(o),l=o<1,requestAnimationFrame(p)}u.Presets.getPreset(u.EPreset.ARLEQUIN,(function(r){e=new o.default(r),t=e.computeFourierSeries(300),h.reset(),requestAnimationFrame(p)}))}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){if(e.length<2)throw"A line must have at least 2 points.";this.points=e,this.nbSegments=e.length-1}return e.prototype.draw=function(t,r){var n=(r=Math.min(1,Math.max(0,r)))*this.nbSegments,i=Math.floor(n);t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var o=0;o<i;o++)t.lineTo(this.points[o+1].x,this.points[o+1].y);if(i<this.nbSegments){var a=n%1,s=e.interpolate(this.points[i].x,this.points[i+1].x,a),u=e.interpolate(this.points[i].y,this.points[i+1].y,a);t.lineTo(s,u)}t.stroke(),t.closePath()},e.interpolate=function(e,t,r){return e*(1-r)+t*r},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(0),o=function(){function e(t){this.points=t,this.pathLength=0;for(var r=0;r<this.points.length-1;r++)this.pathLength+=e.distance(this.points[r],this.points[r+1]);this.extendedPathLength=this.pathLength;var n=this.points[0],i=this.points[this.points.length-1];n.x===i.x&&n.y===i.y||(this.extendedPathLength+=e.distance(i,n),this.points.push({x:n.x,y:n.y}))}return e.interpolate=function(e,t,r){return{x:e.x*(1-r)+t.x*r,y:e.y*(1-r)+t.y*r}},e.distance=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.draw=function(t,r){t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);var n,i=r*this.pathLength,o=0;for(n=0;n<this.points.length-1;n++){var a=this.points[n],s=this.points[n+1],u=e.distance(a,s);if(!(o+u<i)){var c=(i-o)/u,h=e.interpolate(a,s,c);t.lineTo(h.x,h.y),o+=e.distance(a,h);break}o+=u,t.lineTo(s.x,s.y)}t.stroke(),t.closePath()},e.prototype.computeFourierSeries=function(t){for(var r=Math.ceil(i.Parameters.integrationPrecision*this.extendedPathLength),o=this.extendedPathLength/r,a=1/r,s=[],u=0,c=0,h=0;h<r;h++)for(var f=(h+.5)*a,l=(h+.5)*o,d=c;d<this.points.length-1;d++){var p=this.points[d],g=this.points[d+1],v=e.distance(p,g);if(!(u+v<l)){var b=(l-u)/v,m=e.interpolate(p,g,b);s.push({x:m.x,y:m.y,two_pi_t:2*Math.PI*f});break}u+=v,c=d+1}for(var y=[],P=0;P<2*t+1;P++){var x=Math.floor((P+1)/2);P>0&&P%2==0&&(x*=-1);for(var O=0,C=0,k=0,M=s;k<M.length;k++){var _=M[k],j=x*_.two_pi_t,w=Math.cos(j),S=Math.sin(j);O+=a*(_.x*w+_.y*S),C+=a*(_.y*w-_.x*S)}y.push({magnitude:Math.sqrt(O*O+C*C),phase:Math.atan2(C,O),n:x})}return new n.FourierSeries(y,this.pathLength/this.extendedPathLength)},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=2*Math.PI,i=function(){function e(e,t){this._coefficients=e,this._length=t}return e.prototype.computePoint=function(e,t){var r=0,i=0;t=this.computeRealT(t);for(var o=this.computeAmountOfCoefficients(e),a=0;a<o;a++){var s=this._coefficients[a],u=n*s.n*t;r+=s.magnitude*Math.cos(u+s.phase),i+=s.magnitude*Math.sin(u+s.phase)}return{x:r,y:i}},e.prototype.drawPathToPoint=function(e,t,r){var i=0,o=0;r=this.computeRealT(r),e.beginPath(),e.moveTo(i,o);for(var a=this.computeAmountOfCoefficients(t),s=0;s<a;s++){var u=this._coefficients[s],c=n*u.n*r;i+=u.magnitude*Math.cos(c+u.phase),o+=u.magnitude*Math.sin(c+u.phase),e.lineTo(i,o)}e.stroke(),e.closePath()},e.prototype.drawCircles=function(e,t,r){r=this.computeRealT(r);for(var i,o,a,s=0,u=0,c=this.computeAmountOfCoefficients(t),h=0;h<c;h++){var f=this._coefficients[h];i=s,o=u,a=f.magnitude,e.beginPath(),e.arc(i,o,a,0,n),e.closePath(),e.stroke();var l=n*f.n*r;s+=f.magnitude*Math.cos(l+f.phase),u+=f.magnitude*Math.sin(l+f.phase)}},e.prototype.computeAmountOfCoefficients=function(e){return Math.min(this._coefficients.length,1+2*e)},e.prototype.computeRealT=function(e){return e*this._length},e}();t.FourierSeries=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){var e=this;this.speed=n.Parameters.speed,n.Parameters.speedChangeObservers.push((function(){return e.setSpeed(n.Parameters.speed)})),this.reset()}return e.prototype.reset=function(){this.lastCheckpoint=0,this.lastCheckpointReal=performance.now()},e.prototype.setSpeed=function(e){this.lastCheckpoint=this.current,this.lastCheckpointReal=performance.now(),this.speed=e},Object.defineProperty(e.prototype,"current",{get:function(){return this.lastCheckpoint+this.speed*(performance.now()-this.lastCheckpointReal)},enumerable:!0,configurable:!0}),e}();t.default=i},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ARLEQUIN="arlequin",e.DOG="dog",e.ROUND="round",e.TRIANGLE="triangle"}(n||(n={})),t.EPreset=n;var i=function(){function e(){}return e.getPreset=function(t,r){if(void 0===e.cache)e.cache={};else if(void 0!==e.cache[t])return void r(e.cache[t]);var n=new XMLHttpRequest;n.addEventListener("readystatechange",(function(){if(n.readyState===XMLHttpRequest.DONE&&200===n.status){var i=e.tryParsePointsArray(n.responseText);i&&(e.cache[t]=i,r(i))}})),n.open("GET","resources/"+t+".txt"),n.send(null)},e.tryParsePointsArray=function(e){if(!e)return null;for(var t=[],r=0,n=e.split("\n");r<n.length;r++){var i=n[r].split(" ");if(2!==i.length)return null;t.push({x:+i[0],y:+i[1]})}return t.length<=1?null:t},e}();t.Presets=i}]);
//# sourceMappingURL=main.min.js.map