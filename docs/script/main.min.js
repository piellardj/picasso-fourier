!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="preset-picker-id",i="speed-range-id",a="persistence-checkbox-id",o="close-loop-checkbox-id",s="loop-checkbox-id",u="reset-button-id",c="circles-checkbox-id",h="segments-checkbox-id",f="curve-checkbox-id",l="original-curve-checkbox-id",d="order-range-id";function p(e){for(var t=0,r=e;t<r.length;t++){(0,r[t])()}}var v,g={clear:[],redraw:[],speedChange:[],presetChange:[]},b=function(){function e(){}return Object.defineProperty(e,"preset",{get:function(){return v},enumerable:!0,configurable:!0}),Object.defineProperty(e,"speed",{get:function(){return P},enumerable:!0,configurable:!0}),Object.defineProperty(e,"persistence",{get:function(){return y},enumerable:!0,configurable:!0}),Object.defineProperty(e,"closeLoop",{get:function(){return C},enumerable:!0,configurable:!0}),Object.defineProperty(e,"repeat",{get:function(){return O},enumerable:!0,configurable:!0}),Object.defineProperty(e,"displayCircles",{get:function(){return x},enumerable:!0,configurable:!0}),Object.defineProperty(e,"displaySegments",{get:function(){return _},enumerable:!0,configurable:!0}),Object.defineProperty(e,"displayCurve",{get:function(){return M},enumerable:!0,configurable:!0}),Object.defineProperty(e,"displayOriginalCurve",{get:function(){return k},enumerable:!0,configurable:!0}),Object.defineProperty(e,"order",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(e,"integrationPrecision",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"curvePrecision",{get:function(){return.5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clearObservers",{get:function(){return g.clear},enumerable:!0,configurable:!0}),Object.defineProperty(e,"redrawObservers",{get:function(){return g.redraw},enumerable:!0,configurable:!0}),Object.defineProperty(e,"speedChangeObservers",{get:function(){return g.speedChange},enumerable:!0,configurable:!0}),Object.defineProperty(e,"presetObservers",{get:function(){return g.presetChange},enumerable:!0,configurable:!0}),e}();function m(e){var t=v;(v=e)!==t&&p(g.presetChange)}t.Parameters=b,Picker.addObserver(n,m),m(Picker.getValue(n));var P=Range.getValue(i);Range.addObserver(i,(function(e){var t=P;P=e;for(var r=0,n=g.speedChange;r<n.length;r++){(0,n[r])(t)}}));var y=Checkbox.isChecked(a);Checkbox.addObserver(a,(function(e){y=e}));var C=Checkbox.isChecked(o);Checkbox.addObserver(o,(function(e){C=e,p(g.clear)}));var O=Checkbox.isChecked(s);Checkbox.addObserver(s,(function(e){O=e})),Button.addObserver(u,(function(){return p(g.clear)}));var x=Checkbox.isChecked(c);Checkbox.addObserver(c,(function(e){x=e,p(g.redraw)}));var _=Checkbox.isChecked(h);Checkbox.addObserver(h,(function(e){_=e,p(g.redraw)}));var M=Checkbox.isChecked(f);Checkbox.addObserver(f,(function(e){M=e,p(g.redraw)}));var k=Checkbox.isChecked(l);Checkbox.addObserver(l,(function(e){k=e,p(g.redraw)}));var w=Range.getValue(d);Range.addObserver(d,(function(e){w=e,p(g.clear)}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=!0,i=function(){function e(){}return Object.defineProperty(e,"enabled",{set:function(e){n=e},enumerable:!0,configurable:!0}),e.message=function(e){n&&console.log(e)},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.start=performance.now()}return Object.defineProperty(e.prototype,"milliseconds",{get:function(){return Math.ceil(performance.now()-this.start)},enumerable:!0,configurable:!0}),e}();t.default=n},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(4)),a=n(r(6)),o=r(0),s=r(7);!function(){var e,t,r=document.getElementById("canvas"),n=r.getContext("2d");n.lineWidth=1;var u=new a.default,c=!0;o.Parameters.clearObservers.push((function(){return c=!0}));var h=!0;o.Parameters.redrawObservers.push((function(){return h=!0}));var f=2e3;function l(){e=null,t=null;var r=Canvas.getSize();Canvas.showLoader(!0),s.Presets.getPreset(o.Parameters.preset,r,(function(r){e=new i.default(r),t=e.computeFourierSeries(300),c=!0,u.reset(),Canvas.showLoader(!1)}))}o.Parameters.presetObservers.push(l),Canvas.Observers.canvasResize.push(l),l(),requestAnimationFrame((function i(){if(e&&t){var a=u.current/f;if(a>=1&&o.Parameters.repeat&&(c=!0),c&&(c=!1,u.reset(),a=0,Canvas.setIndicatorText("fourier-order",o.Parameters.order.toLocaleString()),n.clearRect(0,0,r.width,r.height)),h){if(r.width===r.clientWidth&&r.height===r.clientHeight||(r.width=r.clientWidth,r.height=r.clientHeight),o.Parameters.persistence||n.clearRect(0,0,r.width,r.height),o.Parameters.displayOriginalCurve){n.strokeStyle="rgb(0,128,0)";var s=n.lineWidth;n.lineWidth=2,e.draw(n,a),n.lineWidth=s}o.Parameters.displayCircles&&(n.strokeStyle=o.Parameters.persistence?"rgba(255,255,255,0.01)":"rgba(255,255,255,0.3)",t.drawCircles(n,o.Parameters.order,a)),o.Parameters.displayCurve&&(n.strokeStyle="white",t.drawCurve(n,o.Parameters.order,a)),o.Parameters.displaySegments&&(n.strokeStyle=o.Parameters.persistence?"rgba(255,0,0,0.01)":"red",t.drawPathToPoint(n,o.Parameters.order,a))}h=a<1}requestAnimationFrame(i)}))}()},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),a=r(0),o=n(r(1)),s=n(r(2)),u=function(){function e(t){this.points=t,this.pathLength=0;for(var r=0;r<this.points.length-1;r++)this.pathLength+=e.distance(this.points[r],this.points[r+1]);this.extendedPathLength=this.pathLength;var n=this.points[0],i=this.points[this.points.length-1];n.x===i.x&&n.y===i.y||(this.extendedPathLength+=e.distance(i,n),this.points.push({x:n.x,y:n.y}))}return e.interpolate=function(e,t,r){return{x:e.x*(1-r)+t.x*r,y:e.y*(1-r)+t.y*r}},e.distance=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.draw=function(t,r){t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y),r=Math.min(1,Math.max(0,r));var n,i=a.Parameters.closeLoop?r*this.extendedPathLength:r*this.pathLength,o=0;for(n=0;n<this.points.length-1;n++){var s=this.points[n],u=this.points[n+1],c=e.distance(s,u);if(!(o+c<i)){var h=(i-o)/c,f=e.interpolate(s,u,h);t.lineTo(f.x,f.y),o+=e.distance(s,f);break}o+=c,t.lineTo(u.x,u.y)}t.stroke(),t.closePath()},e.prototype.computeFourierSeries=function(t){for(var r=new s.default,n=Math.ceil(a.Parameters.integrationPrecision*this.extendedPathLength),u=this.extendedPathLength/n,c=1/n,h=[],f=0,l=0,d=0;d<n;d++)for(var p=(d+.5)*c,v=(d+.5)*u,g=l;g<this.points.length-1;g++){var b=this.points[g],m=this.points[g+1],P=e.distance(b,m);if(!(f+P<v)){var y=(v-f)/P,C=e.interpolate(b,m,y);h.push({x:C.x,y:C.y,two_pi_t:2*Math.PI*p});break}f+=P,l=g+1}for(var O=[],x=0;x<2*t+1;x++){var _=Math.floor((x+1)/2);x>0&&x%2==0&&(_*=-1);for(var M=0,k=0,w=0,j=h;w<j.length;w++){var S=j[w],L=_*S.two_pi_t,R=Math.cos(L),T=Math.sin(L);M+=c*(S.x*R+S.y*T),k+=c*(S.y*R-S.x*T)}O.push({magnitude:Math.sqrt(M*M+k*k),phase:Math.atan2(k,M),n:_})}return o.default.message("Computed "+t+" Fourier coefficient with "+n+" integration steps in "+r.milliseconds+" ms."),new i.FourierSeries(O,this.pathLength/this.extendedPathLength,this.pathLength)},e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=2*Math.PI,a=function(){function e(e,t,r){this._coefficients=e,this._length=t,this._partialCurve=[],this._partialCurveStepSize=t/(n.Parameters.curvePrecision*r)}return e.prototype.computePoint=function(e,t){var r=0,n=0;t=this.computeRealT(t);for(var a=this.computeAmountOfCoefficients(e),o=0;o<a;o++){var s=this._coefficients[o],u=i*s.n*t;r+=s.magnitude*Math.cos(u+s.phase),n+=s.magnitude*Math.sin(u+s.phase)}return{x:r,y:n}},e.prototype.drawCurve=function(e,t,r){r=Math.min(1,Math.max(0,r)),t!==this._partialCurveOrder&&(this._partialCurveOrder=t,this._partialCurve=[]);for(var n,i=r/this._partialCurveStepSize,a=Math.floor(i),o=Math.ceil(i),s=this._partialCurve.length;s<=a;s++)n=this.computePoint(t,s*this._partialCurveStepSize),this._partialCurve.push(n);e.beginPath(),e.moveTo(this._partialCurve[0].x,this._partialCurve[0].y);for(s=1;s<o;s++)e.lineTo(this._partialCurve[s].x,this._partialCurve[s].y);n=this.computePoint(t,r),e.lineTo(n.x,n.y),e.stroke(),e.closePath()},e.prototype.drawPathToPoint=function(e,t,r){var n=this.computeAmountOfCoefficients(t);if(!(n<=0)){var a=this._coefficients[0].magnitude*Math.cos(this._coefficients[0].phase),o=this._coefficients[0].magnitude*Math.sin(this._coefficients[0].phase),s=i*this.computeRealT(r);e.beginPath(),e.moveTo(a,o);for(var u=1;u<n;u++){var c=this._coefficients[u],h=s*c.n;a+=c.magnitude*Math.cos(h+c.phase),o+=c.magnitude*Math.sin(h+c.phase),e.lineTo(a,o)}e.stroke(),e.closePath()}},e.prototype.drawCircles=function(e,t,r){var n=this.computeAmountOfCoefficients(t);if(!(n<2))for(var a,o,s,u=i*this.computeRealT(r),c=0,h=0,f=0;f<n;f++){var l=this._coefficients[f];f>1&&(a=c,o=h,s=l.magnitude,e.beginPath(),e.arc(a,o,s,0,i),e.closePath(),e.stroke());var d=u*l.n;c+=l.magnitude*Math.cos(d+l.phase),h+=l.magnitude*Math.sin(d+l.phase)}},e.prototype.computeAmountOfCoefficients=function(e){return Math.min(this._coefficients.length,1+2*e)},e.prototype.computeRealT=function(e){return e=Math.min(1,Math.max(0,e)),n.Parameters.closeLoop?e:e*this._length},e}();t.FourierSeries=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){var e=this;this.speed=n.Parameters.speed,n.Parameters.speedChangeObservers.push((function(){return e.setSpeed(n.Parameters.speed)})),this.reset()}return e.prototype.reset=function(){this.lastCheckpoint=0,this.lastCheckpointReal=performance.now()},e.prototype.setSpeed=function(e){this.lastCheckpoint=this.current,this.lastCheckpointReal=performance.now(),this.speed=e},Object.defineProperty(e.prototype,"current",{get:function(){return this.lastCheckpoint+this.speed*(performance.now()-this.lastCheckpointReal)},enumerable:!0,configurable:!0}),e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(r(1)),o=n(r(2));!function(e){e.ARLEQUIN="arlequin",e.BULL="bull",e.CAMEL="camel",e.DOG="dog",e.DOVE="dove",e.FLAMINGO="flamingo",e.HORSE="horse",e.MOUSE="mouse",e.WOMAN1="woman1",e.WOMAN2="woman2"}(i||(i={})),t.EPreset=i;var s=512,u=function(){function e(){}return e.getPreset=function(t,r,n){var i=new o.default,u=!1;function c(e){for(var o=Math.min(r[0]/s,r[1]/s),c=.5*(r[0]-s*o),h=.5*(r[1]-s*o),f=[],l=0,d=e;l<d.length;l++){var p=d[l];f.push({x:p.x*o+c,y:p.y*o+h})}u?a.default.message("Retrieved preset '"+t+"' from cache in "+i.milliseconds+" ms."):a.default.message("Downloaded preset '"+t+"' in "+i.milliseconds+" ms."),n(f)}if(void 0===e.cache)e.cache={};else if(void 0!==e.cache[t])return u=!0,void c(e.cache[t]);var h=new XMLHttpRequest;h.addEventListener("readystatechange",(function(){if(h.readyState===XMLHttpRequest.DONE&&200===h.status){var r=e.tryParsePointsArray(h.responseText);r&&(e.cache[t]=r,c(e.cache[t]))}})),h.open("GET","resources/"+t+".txt"),h.send(null)},e.tryParsePointsArray=function(e){if(!e)return null;for(var t=new o.default,r=[],n=0,i=e.split("\n");n<i.length;n++){var s=i[n].split(" ");if(2!==s.length)return null;r.push({x:+s[0],y:+s[1]})}return r.length<=1?null:(a.default.message("Parsed preset in "+t.milliseconds+" ms."),r)},e}();t.Presets=u}]);
//# sourceMappingURL=main.min.js.map