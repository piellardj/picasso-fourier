!function(){"use strict";var e={276:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Canvas2D=void 0,r(457);var n=2*Math.PI,i=function(){function e(){var e;this.wantedLineWidth=1,this.isDrawingLine=!1,this.nbPointsInLine=0,this.canvas=Page.Canvas.getCanvas(),this.context=this.canvas.getContext("2d"),this.cssPixel=null!==(e=window.devicePixelRatio)&&void 0!==e?e:1,this.viewportZoom=1,this.viewportCenter={x:0,y:0},this.precomputeTransformation()}return Object.defineProperty(e.prototype,"center",{set:function(e){this.viewportCenter.x=e.x,this.viewportCenter.y=e.y,this.precomputeTransformation()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoom",{set:function(e){this.viewportZoom=e,this.precomputeTransformation()},enumerable:!1,configurable:!0}),e.prototype.setFullViewport=function(){this.viewportZoom=1,this.viewportCenter.x=.5*this.canvas.width/this.cssPixel,this.viewportCenter.y=.5*this.canvas.height/this.cssPixel,this.precomputeTransformation()},Object.defineProperty(e.prototype,"lineWidth",{set:function(e){this.wantedLineWidth=this.cssPixel*e,this.context.lineWidth=this.wantedLineWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeStyle",{set:function(e){this.context.strokeStyle=e},enumerable:!1,configurable:!0}),e.prototype.adjustSize=function(){var e=Math.floor(this.cssPixel*this.canvas.clientWidth),t=Math.floor(this.cssPixel*this.canvas.clientHeight);this.canvas.width===e&&this.canvas.height===t||(this.canvas.width=e,this.canvas.height=t,this.setFullViewport())},e.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.drawCircle=function(e,t){var r=this.viewportZoom*t,i=this.scale*e.x+this.translateX,a=this.scale*e.y+this.translateY;r>.5&&(this.context.beginPath(),this.context.arc(i,a,r,0,n),this.context.closePath(),this.context.stroke())},e.prototype.startLine=function(){this.isDrawingLine&&this.endLine(),this.context.lineWidth=this.wantedLineWidth,this.context.beginPath(),this.isDrawingLine=!0,this.nbPointsInLine=0},e.prototype.addPointToLine=function(e){var t=this.scale*e.x+this.translateX,r=this.scale*e.y+this.translateY;0===this.nbPointsInLine?this.context.moveTo(t,r):this.context.lineTo(t,r),this.nbPointsInLine++},e.prototype.endLine=function(){this.isDrawingLine&&(this.context.stroke(),this.context.closePath(),this.isDrawingLine=!1)},e.prototype.download=function(e){if(this.canvas.msToBlob){var t=this.canvas.msToBlob();window.navigator.msSaveBlob(t,e)}else this.canvas.toBlob((function(t){if(null!==t){var r=document.createElement("a");r.download=e,r.href=URL.createObjectURL(t),r.click()}}))},e.prototype.precomputeTransformation=function(){this.scale=this.cssPixel*this.viewportZoom,this.translateX=this.cssPixel*(-this.viewportZoom*this.viewportCenter.x)+.5*this.canvas.width,this.translateY=this.cssPixel*(-this.viewportZoom*this.viewportCenter.y)+.5*this.canvas.height},e}();t.Canvas2D=i},703:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Clock=void 0;var n=r(61),i=function(){function e(){var e=this;this.speed=n.Parameters.speed,this.paused=!1,this.lastCheckpoint={clockTime:0,realTime:0},n.Parameters.speedChangeObservers.push((function(){return e.updateSpeed()})),this.reset()}return e.prototype.reset=function(){this.paused=!1,this.lastCheckpoint.clockTime=0,this.lastCheckpoint.realTime=performance.now(),this.updateSpeed()},e.prototype.setSpeed=function(e){this.createCheckpoint(),this.speed=e},e.prototype.pause=function(){this.paused||(this.createCheckpoint(),this.paused=!0)},e.prototype.resume=function(){this.paused&&(this.createCheckpoint(),this.paused=!1)},Object.defineProperty(e.prototype,"isPaused",{get:function(){return this.paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this.paused?this.lastCheckpoint.clockTime:this.lastCheckpoint.clockTime+this.speed*(performance.now()-this.lastCheckpoint.realTime)},enumerable:!1,configurable:!0}),e.prototype.createCheckpoint=function(){this.lastCheckpoint.clockTime=this.current,this.lastCheckpoint.realTime=performance.now()},e.prototype.updateSpeed=function(){this.setSpeed(n.Parameters.speed/n.Parameters.zoom)},e}();t.Clock=i},31:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.FourierSeries=void 0;var n=r(61),i=r(190),a=2*Math.PI;function o(e,t,r){var n=a*r*t.n+t.phase;e.x+=t.magnitude*Math.cos(n),e.y+=t.magnitude*Math.sin(n)}function s(e,t,r){for(var n=0,i=t;n<i.length;n++)o(e,i[n],r)}var c=function(){function e(e,t){if(this.partialCurve=[],this.partialCurveOrder=-1,e.length%2!=0&&e.length--,0===e.length)throw new Error("Fourier series must have at least one coefficient.");e.sort((function(e,t){var r=Math.abs(e.n),n=Math.abs(t.n);return r!==n?r-n:t.n-e.n})),this.coefficients=e,this.curveStepSize=1/(n.Parameters.curvePrecision*t)}return e.prototype.resetCurve=function(){this.partialCurve=[]},e.prototype.drawCurve=function(e,t,r){var n=this.computePartialCurve(t,r);e.startLine();for(var a=0;a<n;a++)e.addPointToLine(this.partialCurve[a]);var o=n%1,s=this.partialCurve[Math.floor(n)],c=this.partialCurve[Math.floor(n)+1],u=i.Point.interpolate(s,c,o);e.addPointToLine(u),e.endLine()},e.prototype.drawCurvePartialOrder=function(e,t,r){this.computePartialCurve(t,r);var n=this.getCoefficients(Math.floor(t)+1,Math.floor(t)+1),a=t%1;a<.5?(n=[n[0]],a*=2):a=2*a-1,e.startLine();for(var s=r/this.curveStepSize,c=0;c<s;c++){var u=c*this.curveStepSize,l=i.Point.copy(this.partialCurve[c]);o(l,n[0],u);var h=void 0;1===n.length?h=this.partialCurve[c]:(h=i.Point.copy(l),o(l,n[1],u));var d=i.Point.interpolate(h,l,a);e.addPointToLine(d)}e.endLine()},e.prototype.drawSegmentsToPoint=function(e,t,r){var n={x:0,y:0};e.startLine();for(var i=0,a=this.getCoefficients(0,t);i<a.length;i++)o(n,a[i],r),e.addPointToLine(n);e.endLine()},e.prototype.drawCirclesToPoint=function(e,t,r){var n=this.getCoefficients(0,t);if(!(n.length<2))for(var i={x:0,y:0},a=0,s=n;a<s.length;a++){var c=s[a];0!==c.n&&1!==c.n&&e.drawCircle(i,c.magnitude),o(i,c,r)}},e.prototype.computePoint=function(e,t){var r={x:0,y:0};return s(r,this.getCoefficients(0,e),t),r},e.prototype.computePartialCurve=function(e,t){if((e=Math.floor(e))<this.partialCurveOrder)this.resetCurve();else if(e>this.partialCurveOrder)for(var r=this.getCoefficients(this.partialCurveOrder+1,e),n=0;n<this.partialCurve.length;n++){var i=n*this.curveStepSize;s(this.partialCurve[n],r,i)}var a=t/this.curveStepSize,o=Math.ceil(a),c=this.getCoefficients(0,e);for(n=this.partialCurve.length;n<=o+1;n++){var u={x:0,y:0};s(u,c,n*this.curveStepSize),this.partialCurve.push(u)}return this.partialCurveOrder=e,a},e.prototype.getCoefficients=function(e,t){e=Math.min(e,t);var r=Math.max(0,2*e-1),n=Math.min(this.coefficients.length,2*t+1);return this.coefficients.slice(r,n)},e}();t.FourierSeries=c},188:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LineDrawing=void 0;var o=r(31),s=a(r(4)),c=r(61),u=r(190),l=r(839),h=function(){function e(e){this.points=e;for(var t=0,r=0;r<this.points.length-1;r++)t+=u.Point.distance(this.points[r],this.points[r+1]);var n=t,i=this.points[0],a=this.points[this.points.length-1];u.Point.equals(i,a)||(n+=u.Point.distance(a,i),this.points.push(u.Point.copy(i))),this.pathLength=n,this.originalPathDuration=t/n}return e.prototype.draw=function(e,t){var r=t*this.pathLength,n=0;e.startLine(),e.addPointToLine(this.points[0]);for(var i=0;i<this.points.length-1;i++){var a=this.points[i],o=this.points[i+1],s=u.Point.distance(a,o);if(!(n+s<r)){var c=(r-n)/s,l=u.Point.interpolate(a,o,c);e.addPointToLine(l);break}n+=s,e.addPointToLine(o)}e.endLine()},e.prototype.computeFourierSeries=function(e){for(var t=new l.StopWatch,r=Math.max(200,Math.ceil(c.Parameters.integrationPrecision*this.pathLength)),n=this.pathLength/r,i=1/r,a=[],h=0,d=0,p=0;p<r;p++)for(var f=(p+.5)*i,v=(p+.5)*n,P=d;P<this.points.length-1;P++){var g=this.points[P],b=this.points[P+1],m=u.Point.distance(g,b);if(!(h+m<v)){var C=(v-h)/m,O=u.Point.interpolate(g,b,C);a.push({x:O.x,y:O.y,two_pi_t:2*Math.PI*f});break}h+=m,d=P+1}for(var y=[],w=0;w<2*e+1;w++){var S=Math.floor((w+1)/2);w>0&&w%2==0&&(S*=-1);for(var L=0,x=0,k=0,E=a;k<E.length;k++){var M=E[k],_=S*M.two_pi_t,R=Math.cos(_),T=Math.sin(_);L+=i*(M.x*R+M.y*T),x+=i*(M.y*R-M.x*T)}y.push({magnitude:Math.sqrt(L*L+x*x),phase:Math.atan2(x,L),n:S})}return s.message("Computed ".concat(e," Fourier coefficients with ").concat(r," integration steps ")+"in ".concat(t.milliseconds," ms.")),new o.FourierSeries(y,this.pathLength)},e}();t.LineDrawing=h},4:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.message=t.setEnabled=void 0;var r=!0;t.setEnabled=function(e){r=e},t.message=function(e){r&&console.log(e)}},633:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(276),s=r(703),c=r(188),u=r(61),l=r(470),h=a(r(873));function d(e){e=Math.round(100*e)/100,Page.Canvas.setIndicatorText("fourier-order",e.toLocaleString())}r(457),function(){var e=new o.Canvas2D;e.lineWidth=1,u.Parameters.downloadObservers.push((function(){return e.download("picasso-fourier.png")}));var t=null,r=null,n=new s.Clock,i=!0;u.Parameters.clearObservers.push((function(){return i=!0})),h.finishedAcquisitionCallbacks.push((function(e){e&&(t=null,r=null,Page.Canvas.showLoader(!0),l.Presets.setCustomPreset(h.recordedPath,Page.Canvas.getSize()),u.Parameters.setCustomPreset()),a=!0}));var a=!0;function p(e){t=new c.LineDrawing(e),r=t.computeFourierSeries(301),i=!0,n.reset(),Page.Canvas.showLoader(!1)}function f(){t=null,r=null;var e=Page.Canvas.getSize();Page.Canvas.showLoader(!0),l.Presets.getPreset(u.Parameters.preset,e,p)}u.Parameters.redrawObservers.push((function(){return a=!0})),u.Parameters.presetObservers.push(f),Page.Canvas.Observers.canvasResize.push(f);f(),requestAnimationFrame((function o(){if(h.isRecording())e.clear(),e.setFullViewport(),u.Parameters.resetZoom(),e.strokeStyle="white",h.drawCurrentPath(e);else if(null!==t&&null!==r){var s=n.current/2e3,c=u.Parameters.closeLoop?1:t.originalPathDuration,l=s>=c;if(!l&&n.isPaused&&n.resume(),s=Math.min(s,c),l&&(u.Parameters.repeat?i=!0:n.pause()),i&&(u.Parameters.isProgressiveMode&&u.Parameters.resetZoom(),i=!1,n.reset(),r.resetCurve(),s=0,l=!1,d(u.Parameters.order),e.clear()),a&&(e.adjustSize(),u.Parameters.isProgressiveMode||1===u.Parameters.zoom?e.setFullViewport():(e.zoom=u.Parameters.zoom,e.center=r.computePoint(u.Parameters.order,s)),u.Parameters.persistence||e.clear(),u.Parameters.displayOriginalCurve&&(e.strokeStyle="rgb(0,128,0)",e.lineWidth=3,t.draw(e,u.Parameters.isProgressiveMode?c:s),e.lineWidth=1),u.Parameters.displayCircles&&(e.strokeStyle=u.Parameters.persistence?"rgba(255,255,255,0.01)":"rgba(255,255,255,0.3)",r.drawCirclesToPoint(e,u.Parameters.order,s)),u.Parameters.displayCurve&&(e.strokeStyle="white",r.drawCurve(e,u.Parameters.order,s)),u.Parameters.displaySegments&&(e.strokeStyle=u.Parameters.persistence?"rgba(255,0,0,0.01)":"red",r.drawSegmentsToPoint(e,u.Parameters.order,s)),u.Parameters.isProgressiveMode)){var p=u.Parameters.order*s/c;u.Parameters.persistence?u.Parameters.smooth?e.strokeStyle="rgba(255,255,255,0.01)":e.strokeStyle="rgba(255,255,255,0.03)":e.strokeStyle="white",u.Parameters.smooth?r.drawCurvePartialOrder(e,p,c):(p=Math.floor(p),r.drawCurve(e,p,c)),d(p)}a=!l&&u.Parameters.speed>0}requestAnimationFrame(o)}))}()},457:function(){},61:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Parameters=void 0;var n=r(470);r(457);var i,a={PRESET:"preset-picker-id",MODE:"mode-picker-id",SPEED:"speed-range-id",PERSISTENCE:"persistence-checkbox-id",SMOOTH:"smooth-checkbox-id",CLOSE_LOOP:"close-loop-checkbox-id",REPEAT:"loop-checkbox-id",RESET:"reset-button-id",DISPLAY_CIRCLES:"circles-checkbox-id",DISPLAY_SEGMENTS:"segments-checkbox-id",DISPLAY_CURVE:"curve-checkbox-id",DISPLAY_ORIGINAL_CURVE:"original-curve-checkbox-id",ORDER:"order-range-id",ZOOM:"zoom-range-id",INDICATOR:"indicator-checkbox-id",DOWNLOAD:"download-button-id"};function o(e){for(var t=0,r=e;t<r.length;t++)(0,r[t])()}!function(e){e.INSTANT="0",e.PROGRESSIVE="1"}(i||(i={}));var s,c,u={clear:[],redraw:[],speedChange:[],presetChange:[],download:[]};function l(e){var t=s;(s=e)!==t&&o(u.presetChange)}function h(e){if(1===e.length){var t=e[0];if(t!==c){var r=(c=t)===i.INSTANT;Page.Controls.setVisibility(a.SMOOTH,!r),Page.Controls.setVisibility(a.DISPLAY_CIRCLES,r),Page.Controls.setVisibility(a.DISPLAY_SEGMENTS,r),Page.Controls.setVisibility(a.DISPLAY_CURVE,r),Page.Controls.setVisibility(a.ZOOM,r),o(u.clear)}}}Page.Picker.addObserver(a.PRESET,l),l(Page.Picker.getValue(a.PRESET)),h(Page.Tabs.getValues(a.MODE)),Page.Tabs.addObserver(a.MODE,h);var d=Page.Range.getValue(a.SPEED);Page.Range.addObserver(a.SPEED,(function(e){d=e,o(u.speedChange)}));var p=Page.Checkbox.isChecked(a.PERSISTENCE);Page.Checkbox.addObserver(a.PERSISTENCE,(function(e){p=e}));var f=Page.Checkbox.isChecked(a.SMOOTH);Page.Checkbox.addObserver(a.SMOOTH,(function(e){f=e}));var v=Page.Checkbox.isChecked(a.CLOSE_LOOP);Page.Checkbox.addObserver(a.CLOSE_LOOP,(function(e){v=e,c===i.PROGRESSIVE&&o(u.clear)}));var P=Page.Checkbox.isChecked(a.REPEAT);Page.Checkbox.addObserver(a.REPEAT,(function(e){P=e})),Page.Button.addObserver(a.RESET,(function(){return o(u.clear)}));var g=Page.Checkbox.isChecked(a.DISPLAY_CIRCLES);Page.Checkbox.addObserver(a.DISPLAY_CIRCLES,(function(e){g=e,o(u.redraw)}));var b=Page.Checkbox.isChecked(a.DISPLAY_SEGMENTS);Page.Checkbox.addObserver(a.DISPLAY_SEGMENTS,(function(e){b=e,o(u.redraw)}));var m=Page.Checkbox.isChecked(a.DISPLAY_CURVE);Page.Checkbox.addObserver(a.DISPLAY_CURVE,(function(e){m=e,o(u.redraw)}));var C=Page.Checkbox.isChecked(a.DISPLAY_ORIGINAL_CURVE);Page.Checkbox.addObserver(a.DISPLAY_ORIGINAL_CURVE,(function(e){C=e,o(u.redraw)}));var O=Page.Range.getValue(a.ORDER);Page.Range.addObserver(a.ORDER,(function(e){O=e,o(u.clear)}));var y=Page.Range.getValue(a.ZOOM);function w(e){y=e,o(u.redraw),o(u.speedChange)}function S(){var e=Page.Checkbox.isChecked(a.INDICATOR);Page.Canvas.setIndicatorsVisibility(e)}Page.Range.addObserver(a.ZOOM,w),Page.Canvas.Observers.mouseWheel.push((function(e){var t=y*(1+.1*e);console.log("".concat(y,"  -  ").concat(t)),Page.Range.setValue(a.ZOOM,t),w(Page.Range.getValue(a.ZOOM)),console.log(Page.Range.getValue(a.ZOOM))})),S(),Page.Checkbox.addObserver(a.INDICATOR,S),Page.FileControl.addDownloadObserver(a.DOWNLOAD,(function(){return o(u.download)}));var L=function(){function e(){}return Object.defineProperty(e,"preset",{get:function(){return s},enumerable:!1,configurable:!0}),e.setCustomPreset=function(){Page.Picker.setValue(a.PRESET,null),s=n.EPreset.CUSTOM,o(u.presetChange)},Object.defineProperty(e,"isProgressiveMode",{get:function(){return c===i.PROGRESSIVE},enumerable:!1,configurable:!0}),Object.defineProperty(e,"speed",{get:function(){return this.isProgressiveMode?.1*d:d},enumerable:!1,configurable:!0}),Object.defineProperty(e,"persistence",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(e,"smooth",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(e,"closeLoop",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(e,"repeat",{get:function(){return P},enumerable:!1,configurable:!0}),Object.defineProperty(e,"displayCircles",{get:function(){return c===i.INSTANT&&g},enumerable:!1,configurable:!0}),Object.defineProperty(e,"displaySegments",{get:function(){return c===i.INSTANT&&b},enumerable:!1,configurable:!0}),Object.defineProperty(e,"displayCurve",{get:function(){return c===i.INSTANT&&m},enumerable:!1,configurable:!0}),Object.defineProperty(e,"displayOriginalCurve",{get:function(){return C},enumerable:!1,configurable:!0}),Object.defineProperty(e,"order",{get:function(){return O},enumerable:!1,configurable:!0}),Object.defineProperty(e,"zoom",{get:function(){return y},enumerable:!1,configurable:!0}),e.resetZoom=function(){y=1,Page.Range.setValue(a.ZOOM,y)},Object.defineProperty(e,"integrationPrecision",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"curvePrecision",{get:function(){return.5},enumerable:!1,configurable:!0}),Object.defineProperty(e,"clearObservers",{get:function(){return u.clear},enumerable:!1,configurable:!0}),Object.defineProperty(e,"redrawObservers",{get:function(){return u.redraw},enumerable:!1,configurable:!0}),Object.defineProperty(e,"speedChangeObservers",{get:function(){return u.speedChange},enumerable:!1,configurable:!0}),Object.defineProperty(e,"presetObservers",{get:function(){return u.presetChange},enumerable:!1,configurable:!0}),Object.defineProperty(e,"downloadObservers",{get:function(){return u.download},enumerable:!1,configurable:!0}),e}();t.Parameters=L},190:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;var r=function(){function e(){}return e.interpolate=function(e,t,r){return{x:e.x*(1-r)+t.x*r,y:e.y*(1-r)+t.y*r}},e.distance=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},e.equals=function(e,t){return e.x===t.x&&e.y===t.y},e.copy=function(e){return{x:e.x,y:e.y}},e}();t.Point=r},470:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Presets=t.EPreset=void 0;var o,s=a(r(4)),c=r(839);!function(e){e.ARLEQUIN1="arlequin1",e.ARLEQUIN2="arlequin2",e.BULL="bull",e.CAMEL="camel",e.CUSTOM="<none>",e.DOG="dog",e.DOVE="dove",e.FLAMINGO="flamingo",e.HORSE="horse",e.MOUSE="mouse",e.PENGUIN="penguin",e.WOMAN1="woman1",e.WOMAN2="woman2"}(o||(o={})),t.EPreset=o;var u,l=512;!function(e){e[e.LOADING=0]="LOADING",e[e.LOADED=1]="LOADED"}(u||(u={}));var h=function(){function e(){}return e.getPreset=function(t,r,n){if(e.lastRegisteredCallback={wantedPreset:t,wantedWidth:r[0],wantedHeight:r[1],callback:n},void 0===e.cache[t]){e.cache[t]={state:u.LOADING,points:[]};var i=new c.StopWatch,a=new XMLHttpRequest;a.addEventListener("readystatechange",(function(){if(a.readyState===XMLHttpRequest.DONE)if(200===a.status){s.message("Downloaded preset '".concat(t,"' in ").concat(i.milliseconds," ms"));var r=e.tryParsePointsArray(a.responseText);null!==r?(e.cache[t].points=r,e.cache[t].state=u.LOADED,e.tryCallRegisteredCallback()):s.message("Failed to parse download preset '".concat(t,"'"))}else s.message("Failed to download preset '".concat(t,"'"))})),a.open("GET","resources/".concat(t,".txt")),a.send()}else e.tryCallRegisteredCallback()},e.setCustomPreset=function(t,r){for(var n=.5*r[0],i=.5*r[1],a=l/Math.min(r[0],r[1]),s=0,c=t;s<c.length;s++){var h=c[s];h.x=256+(h.x-n)*a,h.y=256+(h.y-i)*a}e.cache[o.CUSTOM]={state:u.LOADED,points:t}},e.tryCallRegisteredCallback=function(){if(null!==e.lastRegisteredCallback){var t=e.lastRegisteredCallback.wantedPreset;if(void 0!==e.cache[t]&&e.cache[t].state===u.LOADED){var r=e.lastRegisteredCallback.wantedWidth,n=e.lastRegisteredCallback.wantedHeight,i=new c.StopWatch,a=e.resizePreset(e.cache[t].points,r,n);s.message("Resized preset '".concat(t,"' in ").concat(i.milliseconds," ms")),e.lastRegisteredCallback.callback(a),e.lastRegisteredCallback=null}}},e.resizePreset=function(e,t,r){for(var n=Math.min(t,r)/l,i=.5*(t-l*n),a=.5*(r-l*n),o=[],s=0,c=e;s<c.length;s++){var u=c[s];o.push({x:u.x*n+i,y:u.y*n+a})}return o},e.tryParsePointsArray=function(e){if(!e)return null;for(var t=[],r=0,n=e.split("\n");r<n.length;r++){var i=n[r].split(" ");if(2!==i.length)return null;t.push({x:+i[0],y:+i[1]})}return t.length<=1?null:t},e.cache={},e.lastRegisteredCallback=null,e}();t.Presets=h},839:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StopWatch=void 0;var r=function(){function e(){this.start=performance.now()}return Object.defineProperty(e.prototype,"milliseconds",{get:function(){return Math.ceil(performance.now()-this.start)},enumerable:!1,configurable:!0}),e}();t.StopWatch=r},873:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.recordedPath=t.isRecording=t.finishedAcquisitionCallbacks=t.drawCurrentPath=void 0;var n=r(190);r(457);var i=[];t.recordedPath=i;var a=!1,o=[];function s(){var e=Page.Canvas.getSize(),t=Page.Canvas.getMousePosition();return{x:e[0]*t[0],y:e[1]*t[1]}}t.finishedAcquisitionCallbacks=o,Page.Canvas.Observers.mouseDown.push((function(){a=!0;var e=s();t.recordedPath=i=[e]})),Page.Canvas.Observers.mouseUp.push((function(){if(a){a=!1;for(var e=0,t=o;e<t.length;e++)(0,t[e])(i.length>=2)}})),Page.Canvas.Observers.mouseMove.push((function(){if(a){var e=s();n.Point.distance(i[i.length-1],e)>2&&i.push(e)}})),t.isRecording=function(){return a},t.drawCurrentPath=function(e){e.startLine();for(var t=0,r=i;t<r.length;t++){var n=r[t];e.addPointToLine(n)}e.endLine()}}},t={};!function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(633)}();
//# sourceMappingURL=main.min.js.map